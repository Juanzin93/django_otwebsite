{% extends "pages/index.html" %}
{% load static ot_extras %}

{% block title %}Online Players{% endblock %}

{% block content %}
<main class="col col--center">
  <section class="panel panel--parchment" id="online-panel"
           data-endpoint="{% url 'server_players' %}{% if selected_world_id %}?world={{ selected_world_id }}{% endif %}">
    <h3 class="panel__title">ONLINE PLAYERS</h3>

    {% if worlds %}
      <nav class="world-tabs">
        <a class="filter-link {% if not selected_world_id %}active{% endif %}"
          href="{% url 'online_list' %}">All Worlds</a>
        {% for w in worlds %}
          <a class="filter-link {% if selected_world_id == w.id %}active{% endif %}"
            href="{% url 'online_list' %}?world={{ w.id }}">{{ w.name }}</a>
        {% endfor %}
      </nav>
    {% endif %}
<style>
  /* force horizontal layout for the world links in this panel */
  #online-panel .world-tabs {
    display: flex !important;
    flex-wrap: wrap;
    gap: 6px;
    margin: 8px 0 12px;
  }
  /* beat .filter-link { display:block } and any width rules */
  #online-panel .world-tabs .filter-link {
    padding: 3px 8px !important;
    font-size: 12px;
    border-radius: 5px;
    height: 24px;
    line-height: 18px;
  }
</style>

    <div class="online-meta">
      <span class="dot dot--status"></span>
      <span class="js-summary">Checking status…</span>
      <span class="js-updated" style="margin-left:auto; opacity:.8; font-size:12px;">—</span>
    </div>

    <table class="table hs" id="online-table">
      <thead>
        <tr>
          <th style="width:24px;">#</th>
          <th style="width:80px;">Outfit</th>
          <th>Name</th>
          <th style="width:80px;">Level</th>
          <th style="width:60px;">Flag</th>
        </tr>
      </thead>
      <tbody class="js-rows">
        <tr><td colspan="5" style="text-align:center; opacity:.8;">Loading…</td></tr>
      </tbody>
    </table>
  </section>
</main>

<script src="{% static 'assets/js/online.js' %}" defer></script>
{% endblock %}
